org.ekstep.pluginframework.pluginManager.registerPlugin({"id":"org.ekstep.repo","ver":"1.0","shortId":"org.ekstep.repo","author":"Manjunath Davanam","description":"","publishedDate":"","renderer":{"main":"renderer/plugin.js"}},Plugin.extend({initialize:function(){EkstepRendererAPI.addEventListener("renderer:repo:create",this.start,this)},start:function(e,n){var r=this;n&&(_.isArray(n)?_.each(n,function(n,t){r.isAvailable(n,function(e){e||r.createInstance(n,t)})}):r.isAvailable(n.path,function(e){e||r.createInstance(n.path,n.position)}))},initPlugin:function(){console.info("Repo plugin init")},createInstance:function(e,n){var t=new(org.ekstep.pluginframework.iRepo.extend({id:Math.random()+"ekstepPluginRepo_"+(new Date).getTime(),basePath:e,discoverManifest:function(e,n,t,r){var i=this;org.ekstep.pluginframework.resourceManager.loadResource(this.resolveResource(e,n,"manifest.json"),"json",function(e,n){t(void 0,{manifest:n,repo:i})},r)},resolveResource:function(e,n,t){return this.basePath+"/"+e+"-"+n+"/"+t}}));this.addInstance(t,n)},addInstance:function(e,n){org.ekstep.pluginframework.resourceManager.addRepo(e,n)},isAvailable:function(n,e){org.ekstep.pluginframework.resourceManager.registeredRepos?e(!!_.find(org.ekstep.pluginframework.resourceManager.registeredRepos,function(e){return e.basePath==n})):e(!1)}}))